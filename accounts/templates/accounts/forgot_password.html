<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Esqueceu a senha</title>
<style>
body { font-family: Arial, sans-serif; background: #f2f2f2; display:flex; justify-content:center; align-items:center; height:100vh; }
.container { background:#fff; padding:40px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); text-align:center; max-width:400px; width:100%; }
input { width: 100%; padding: 12px; margin: 10px 0; border-radius:5px; border:1px solid #ccc; font-size:16px; }
button { padding: 12px 25px; font-size:16px; background:#007BFF; color:#fff; border:none; border-radius:5px; cursor:pointer; }
button:hover { background:#0056b3; }
.message { margin-top: 20px; font-size: 14px; color: green; }
.error { color: red; }
</style>
</head>
<body>
<div class="container">
    <h2>Redefinir senha</h2>
    <p>Digite seu e-mail para receber o link de redefinição:</p>
    <input type="email" id="email" placeholder="Seu e-mail">
    <button id="submitBtn">Enviar</button>
    <div class="message" id="message"></div>
</div>

<script>
document.getElementById('submitBtn').addEventListener('click', async () => {
    const email = document.getElementById('email').value;
    const messageDiv = document.getElementById('message');
    messageDiv.textContent = '';
    try {
        const res = await fetch("/auth/forgot-password/", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email })
        });
        const data = await res.json();
        if(res.ok){
            messageDiv.textContent = data.message;
            messageDiv.classList.remove('error');
        } else {
            messageDiv.textContent = data.detail || "Erro ao enviar e-mail.";
            messageDiv.classList.add('error');
        }
    } catch(err){
        messageDiv.textContent = "Erro de rede, tente novamente.";
        messageDiv.classList.add('error');
    }
});
</script>
</body>
</html>
